---
// src/components/ArticleFeed.astro
import { getCollection } from 'astro:content';

// Fetch your blog posts (sort by date, limit if needed)
const posts = await getCollection('blog', ({ data }) => {
  return data.draft !== true; // Skip drafts
}).sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---

<section class="article-feed">
  <h2 class="feed-title">Articles & Tutorials</h2> <!-- Your pink H2 flair here -->
  
  <ul role="list" class="grid"> <!-- Semantic list for accessibility -->
    {posts.map(post => (
      <li class="article-card">
        <a href={`/blog/${post.slug}/`} class="no-underline">
          <h3>{post.data.title}</h3>
          <p class="excerpt">{post.data.excerpt}</p>
          <time datetime={post.data.date}>
            {new Date(post.data.date).toLocaleDateString()}
          </time>
          {post.data.tags && (
            <ul class="tags">
              {post.data.tags.map(tag => <li>#{tag}</li>)}
            </ul>
          )}
        </a>
      </li>
    ))}
  </ul>
  
  <!-- Optional: Load more button or pagination -->
  {posts.length > 6 && <button>Load More</button>}
</section>

<style>
  .article-feed {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }
  
  .feed-title {
    color: pink; /* Match your design */
    font-size: 1.5rem;
    margin-bottom: 2rem;
    text-align: center;
  }
  
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    list-style: none;
    padding: 0;
  }
  
  .article-card {
    background: var(--card-bg, #f9f9f9);
    border-radius: 8px;
    padding: 1.5rem;
    transition: transform 0.2s;
  }
  
  .article-card:hover {
    transform: translateY(-2px);
  }
  
  .article-card h3 {
    margin: 0 0 0.5rem;
    font-size: 1.25rem;
  }
  
  .excerpt {
    color: var(--text-muted, #666);
    margin: 0 0 1rem;
  }
  
  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
    list-style: none;
    padding: 0;
    font-size: 0.875rem;
  }
</style>